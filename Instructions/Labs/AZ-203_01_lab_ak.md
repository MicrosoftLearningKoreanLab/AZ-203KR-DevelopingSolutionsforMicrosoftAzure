---
lab:
    title: '랩: 이미지 및 컨테이너를 사용하여 컴퓨팅 워크로드 배포'
    type: '답변 키'
    module: '모듈 1: 서비스(IaaS) 컴퓨팅 솔루션으로 Azure 인프라를 개발합니다'
---

# 랩: 이미지 및 컨테이너를 사용하여 컴퓨팅 워크로드 배포
# 학생 랩 답변 키

## Microsoft Azure 사용자 인터페이스

Microsoft 클라우드 도구의 동적 특성을 감안할 때 이 교육 콘텐츠를 개발한 후 Azure 사용자 인터페이스(UI) 변경 사항이 발생할 수 있습니다. 이러한 변경으로 인해 랩 지침 및 랩 단계가 일치하지 않을 수 있습니다.

Microsoft 는 커뮤니티에서 필요한 변경 사항을 가져오는 즉시 이 교육 과정을 업데이트합니다. 그러나 클라우드 업데이트가 자주 이루어지기 때문에 이 교육 콘텐츠가 업데이트되기 전에 UI가 변경될 수 있습니다. **이 경우 변경 사항에 적응하고 필요에 따라 랩에서 작업합니다.**

## 지침

### 시작하기 전에

#### 랩 가상 머신에 로그인

다음 자격 증명을 사용하여 **Windows 10** 가상 머신에 로그인합니다.
    
-   **사용자 이름**: Admin

-   **암호**: Pa55w.rd

> **참고**: 랩 가상 기계 로그인 지침은 교수자가 제공합니다.

#### 설치된 응용 프로그램 검토

**Windows 10** 바탕 화면 하단에 있는 작업 표시줄을 살펴봅니다. 작업 표시줄에는 이 랩에서 사용할 응용 프로그램에 대한 아이콘이 포함되어 있습니다.
    
-   마이크로소프트 에지

-   파일 탐색기

### 연습 1: Azure 포털을 사용하여 가상 기계를(VM) 만들겁니다.

#### 작업 1: Azure Portal 열기

1.  작업 표시줄에서 **Microsoft Edge** 아이콘을 선택합니다.

1.  열린 브라우저 창에서 **Azure Portal**([portal.azure.com](https://portal.azure.com))로 이동합니다.

1.  Microsoft 계정의 **전자 메일 주소**를 입력합니다.

1.  **다음**을 선택합니다.

1.  Microsoft 계정의 **비밀번호**를 입력합니다.

1.  **로그인**을 선택합니다.

    > **참고**: **Azure Portal**에 처음 로그인하는 경우 포털 둘러보기를 제공하는 대화 상자가 나타납니다. **시작 하기**버튼을 선택하여 투어를 건너뜁니다.

#### 작업 2: 리소스 그룹 만들기

1.  포털 왼쪽에 있는 네비게이션 메뉴에서**+ 리소스 만들기**링크를 선택합니다.

    > **참고**: **리소스 만들기** 링크를 찾을 수 없는 경우 "리소스 만들기" 아이콘은 포털의 왼쪽에 있는 더하기 기호입니다.

1.  **새**블레이드 상단에서 피쳐 서비스 목록 위에**마켓플레이스 검색**텍스트 박스를 있습니다.

1.  검색 텍스트 박스에 텍스트**리소스 그룹**을 입력하고 입력하다 를 누릅니다.

1.  **모든** 검색 결과 블레이드에서**리소스 그룹**결과를 선택합니다.

1.  **리소스 그룹** 블레이드에서 **만들기**를 선택합니다.

1.  추가으로 **리소스 그룹** 블레이드에서 **기본** 과 같은 블레이드 상단의 탭을 관찰합니다.

    > **참고**: 각 탭은 새 **리소스 그룹**을 만드는 워크플로의 단계를 나타냅니다. 언제든지**검토 + 만들기**를 선택하여 나머지탭을 건너뛸 수 있습니다.

1.  **기본** 탭에서 다음작업을 수행합니다.
    
    1.  **구독**텍스트 박스를 기본값으로 설정된 상태로 둡니다.
    
    1.  **리소스 그룹**텍스트 박스에 **컨테이너컴퓨팅**값을 입력합니다.
    
    1.  **지역** 드롭다운 목록에서 **(미국) 미국 동부** 위치를 선택합니다.
    
    1.  **검토 +** **만들기**를 선택합니다.

1.  **검토 + 만들기** 탭에서 이전 단계에서 선택한 옵션을 검토합니다.

1.  지정된 구성을 사용하여 리소스 그룹을 만들려면 **만들기**를 선택합니다.

1. 이 랩을 진행하기 전에 만들기 태스크 완료될 때까지 기다립니다.

#### 작업 3: Linux 가상 기계 리소스 만들기

1.  포털 왼쪽에 있는 네비게이션 메뉴에서 **+ 리소스 만들기** 링크를 선택합니다.

1.  **새** 블레이드 상단에서 주요 서비스 목록 위의 **마켓플레이스 검색** 텍스트 상자를 찾습니다.

1.  검색 텍스트 상자에 **Ubuntu Server 18**을 입력하고 Enter 키를 누릅니다.

1.  **모든** 검색 결과 블레이드에서 **우분투 서버 18.04 LTS**결과를 선택합니다.

1.  **우분투 서버 18.04 LTS** 블레이드에서**만들기**를 선택합니다.

1.  **가상 기계 만들기** 블레이드에서**기본**및 **디스크**와 같은 블레이드 상단의 탭을 관찰합니다.

    > **참고**: 각 탭은 새 **가상 머신**을 만드는 워크플로의 단계를 나타냅니다. 언제든지**검토 + 만들기**를 선택하여 나머지 탭을 건너뛸 수 있습니다.

1.  **기본**탭에서 다음 작업을 수행합니다.
    
    1.  **구독** 텍스트 상자를 기본값으로 설정합니다.
    
    1.  **리소스 그룹** 드롭다운 목록에서 기존 **ContainerCompute** 옵션을 선택합니다.

    1.  **가상 머신 이름** 텍스트 상자에 **simplevm**을 입력합니다.
    
    1.  **지역** 드롭다운 목록에서 **(미국) 미국 동부** 위치를 선택합니다.

    1. **가용성 옵션** 드롭다운 목록에서 **인프라 중복이 필요하지 않습니다**가 선택되어 있는지 확인합니다.
    
    1.  **이미지** 텍스트 상자에서 **Ubuntu Server 18.04 LTS** 옵션을 선택했는지 확인합니다.
    
    1.  **사이즈**텍스트 박스에서**사이즈 변경** 링크를 선택합니다.

1.  **VM 사이즈 선택하기**블레이드에서 다음 작업을 수행합니다.

    1.  크기 목록에서 **B1s** 옵션을 선택합니다.

    2.  **선택**를 눌릅니다.

1.  **기본** 탭으로 돌아가서 다음 작업을 수행합니다.

    1.  **인증 유형** 섹션에서 **비밀번호**를 선택합니다.

    1.  **사용자 이름** 텍스트 상자에 **학생**을 입력합니다.

    1.  **암호** 및 **암호 확인** 필드에서 **StudentPa55w.rd**를 입력합니다.

    1.  **Azure Active Directory 로그인(미리 보기)** 섹션에서 **해제**를 선택합니다.

    1.  **공용 인바운드 포트** 섹션에서 **선택한 포트 허용**을 선택합니다.

    1.  **인바운드 포트 선택** 드롭다운 목록에서 **SSH (22)**만 선택합니다.

    1.  **다음: 디스크 \>**를 선택합니다.

1. **디스크** 탭에서 다음 작업을 수행합니다.

    1.  **OS 디스크 유형** 섹션에서 **표준 SSD**를 선택합니다.

    1.  **검토 + 만들기**를 선택합니다.

1. **검토 + 만들기** 탭에서 이전 단계에서 선택한 옵션을 검토합니다.

1. 지정된 구성을 사용하여 VM 을 만들려면 **만들기**를 선택합니다.

1. 이 랩을 진행하기 전에 만들기 태스크 완료될 때까지 기다립니다.

#### 작업 4: 가상 기계 검증

1.  포털의 왼쪽에 있는 네비게이션 메뉴에서 **리소스그룹**링크를 선택합니다.

1.  **리소스 그룹** 블레이드에서 이전에 랩에서 만든**컨테이너컴퓨팅**리소스 그룹을 찾아서 선택합니다.

1.  **컨테이너컴퓨팅** 블레이드에서 이전에 랩에서 만든**simplevm**VM 을 선택합니다.

1.  **가상 기계** 블레이드에서 **연결**을 선택합니다.

1.  **가상 기계에 연결**팝업을 난타나고 나서 다음 작업을 수행합니다.
    
    1.  **IP 주소** 텍스트 박스에서 **공용 IP 주소**를 선택합니다.
    
    2.  **포트 번호** 텍스트 박스에서 **22**를 입력합니다.
    
    3.  **VM 로컬 계정 로그인** 텍스트 박스를 사용하여 로그인 텍스트를**복사**합니다.

        > **참고**: 복사한 명령은 원격 컴퓨터에서 SSH를 사용하여 VM에 연결됩니다. 이 명령은 랩에 나중에 사용합니다.

1.  포털 상단에 **Cloud Shell** 아이콘을 선택하여 새 셸 인스턴스를 엽니다.

    > **참고**: **Cloud Shell** 아이콘은 기호보다 큰 기호 및 밑줄 문자로 표시됩니다.

1.  구독을 사용하여 **Cloud Shell**을 처음 여는 경우 처음 사용 시 **Cloud Shell**을 구성할 수 있는 **Azure Cloud Shell 마법사 시작** 화면이 나타납니다. 마법사에서 다음 작업을 수행합니다.
    
    1.  셸 사용을 시작하도록 새 스토리지 계정을 만들라는 메시지가 대화 상자에 표시됩니다. 기본 설정을 수락하고 **저장소 만들기**를 선택합니다.
    
    1.  랩으로진행하기 전에 **Cloud Shell**이 첫 번째 설치 절차를 완료할 때까지 기다립니다.

    > **참고**: **Cloud Shell**에 대한 구성 옵션이 표시되지 않으면 이 과정의 랩에서 기존 구독을 사용하고 있기 때문일 수 있습니다. 랩은 새 구독을 사용 한다는 가정에서 작성됩니다.

1.  포털하단의 **Cloud Shell** 명령 프롬프트에서 이전에 랩에서 **복사된**명령을 붙여넣은 다음 Enter 를 눌러 SSH 를 사용하여 새 VM 에 연결합니다.

    > **참고**: 이 명령은 사용자 이름과 IP 주소에 따라 달라집니다. 예를 들어 사용자 이름이 **학생**이고 IP 주소가 **40.125.245.5**인 경우 명령은 **ssh Student@40.125.245.5**일겁니다.

1.  SSH 도구는 먼저 호스트의 진위를 확인할 수 없다는 것을 알려주고 계속 연결을 원하는지 묻겠습니다. 프롬프트에 **예**를 입력한 다음 Enter 를 눌러 VM 에 계속 연결합니다.

1. SSH 도구가 비밀번호를 묻겠습니다. **StudentPa55w.rd**를 입력한 다음 Enter 를 눌러 VM으로 인증합니다.

    > **참고**: 비밀번호를 입력할 때 문자가 표시되지 않습니다. 주의 주시기를 부탁드립니다.

1. SSH 를 사용하여 VM 에 연결하면 VM 에서 배쉬 셸에 대한 프롬프트가 표시됩니다. 프롬프트에서 다음 명령을 입력하고 Enter 를 눌러 Linux VM 의 컴퓨터 이름을 봅니다.

```
    uname -mnipo
```

12. 프롬프트에서 다음 명령을 입력하고 Enter 키를 눌러 Linux VM의 배포판 및 운영 체제에 대한 정보를 봅니다.

```
    uname -srv
```

13. 포털 하단의 **Cloud Shell** 창을 닫습니다.

#### 검토

이 연습에서는 Azure 포털 인터페이스를 사용하여 수동으로 새 VM 을 만들고 Cloud Shell 및 SSH 를 사용하여 VM 에 연결했습니다.

### 연습 2: Azure CLI 를 사용하여 가상 시스템 만들기 

#### 작업 1: Cloud Shell 열기

1.  Azure Portal 상단 탐색 표시줄에서 **Cloud Shell** 아이콘을 선택하여 새 셸 인스턴스를 엽니다.

1.  랩에 진행하기 전에**Cloud Shell**이 인스턴스에 연결완료될 때까지 기다립니다.

1.  포털 하단의 **Cloud Shell**명령 프롬프트에서 다음 명령을 입력하고 Enter 를 눌러 Azure CLI 도구의 버전을 봅니다.

```
    az --version
```

#### 작업 2: Azure CLI 명령 사용

1.  다음 명령을 입력하고 Enter 를 눌러 CLI 의 루트 수준에서 하위 그룹 및 명령 목록을 봅니다.

```
    az --help
```

1.  다음 명령을 입력하고 Enter 키를 눌러 **가상 머신**에 대한 하위 그룹 및 명령 목록을 봅니다.

```
    az vm --help
```

1.  다음 명령을 입력하고 Enter 키를 눌러 **가상 머신 만들기** 명령에 대한 인수 및 예제 목록을 봅니다.

```
    az vm create --help
```

1.  다음 명령을 입력하고 Enter 키를 눌러 다음 설정으로 새 **가상 머신**을 만듭니다.
    
      - **리소스 그룹**: 컨테이너계산
    
      - **이름**: quickvm
    
      - **이미지**: 데비안
    
      - **사용자 이름**: 학생
    
      - **비밀번호**: StudentPa55w.rd

```
    az vm create --resource-group ContainerCompute --name quickvm --image Debian --admin-username student --admin-password StudentPa55w.rd
```

    > **참고**: '리소스 그룹 'ContainerCompute''를 찾을 수 없다는 오류로 이 명령이 실패하면 이 랩을 시작할 때 리소스 그룹의 이름을 잘못 지정했거나 로그인 이름과 연결된 구독이 두 개 이상 있음을 의미합니다.  리소스 그룹의 이름을 잘못 지정한 경우 명령에서 올바른 이름으로 대체합니다.  구독이 두 개 이상인 경우 'az account set --subscription' 명령을 사용하여 적절한 구독을 선택할 수 있습니다.

1.  VM 만들기 프로세스가 완료될 때까지 기다립니다. 프로세스가 완료된면 명령이 기계의 세부 정보가 포함된 JSON 파일을 반환합니다.

1.  다음 명령을 입력하고 Enter 를 눌러 새로 만든 VM 에 대한 다양한 메타데이터가 포함된 상세한 JSON 파일을 봅니다.

```
    az vm show --resource-group ContainerCompute --name quickvm
```

1.  다음 명령을 입력하고 Enter 키를 눌러 VM과 연결된 모든 IP 주소를 나열합니다.

```
    az vm list-ip-addresses --resource-group ContainerCompute --name quickvm
```

1.  다음 명령을 입력하고 Enter 키를 눌러서 출력을 필터링하여 첫 번째 IP 주소 값만 반환합니다.

```
    az vm list-ip-addresses --resource-group ContainerCompute --name quickvm --query '[].{ip:virtualMachine.network.publicIpAddresses[0].ipAddress}' --output tsv
```

1.  다음 명령을 입력하고 Enter 키를 눌러 *ipAddress*라는 새 Bash 셸 변수에 이전 명령의 결과를 저장합니다.

```
    ipAddress=$(az vm list-ip-addresses --resource-group ContainerCompute --name quickvm --query '[].{ip:virtualMachine.network.publicIpAddresses[0].ipAddress}' --output tsv)
```

1. 다음 명령을 입력하고 Enter 키를 눌러 Bash 셸 변수 *ipAddress*의 값을 출력합니다.

```
    echo $ipAddress
```

1. 다음 명령을 입력하고 Enter 키를 눌러 Bash 셸 변수 *ipAddress*에 저장된 IP 주소와 SSH 도구를 사용하여 이 랩의 앞에서 만든 VM에 연결합니다.

```
    ssh student@$ipAddress
```

1. **SSH** 도구는 먼저 호스트의 진위를 확인할 수 없다는 것을 알려주고 계속해서 연결하기 원하는지 묻습니다. **예**를 입력한다음 Enter 를 눌러 VM 에 계속 연결합니다.

1. **SSH**도구가 비밀번호를 묻겠습니다. **StudentPa55w.rd**를 입력한 다음 Enter 를 눌러 VM으로 인증합니다.

1. SSH 를 사용하여 VM 에 연결한 다음 명령을 입력하고 Enter 를 눌러 Linux VM 을 설명하는 메타데이터를 봅니다.

```
    uname -a
```

1. 포털 하단의 **Cloud Shell** 창을 닫습니다.

#### 검토

이 연습에서는 Azure Cloud Shell 을 사용하여 자동된 스크립트의 일부로 VM 을 만들었습니다.

### 연습 3: 도커 컨테이너 이미지를 만들고 Azure 컨테이너 레지스트리에 배치합니다.

#### 작업 1: Cloud Shell 및 편집기 열기

1.  Azure 포털 상단 네비게인션 바에서 **Cloud Shell** 아이콘을 선택하여 새 셸 인스턴스를 엽니다.

1.  랩으로 이동하기 전에 **Cloud Shell**이 인스턴스에 연결완료될 때까지 기다립니다.

1.  포털 하단의 **Cloud Shell** 명령 프롬프트에서 다음 명령을 입력하고 **Enter** 를 눌러 루트 디렉토리에서 **\~/clouddrive**디렉터리로 이동합니다.

```
    cd ~/clouddrive
```

1.  다음 명령을 입력하고 Enter 키를 눌러 **\~/clouddrive** 디렉터리 내에서 **ipcheck**라는 새 디렉터리를 만듭니다.

```
    mkdir ipcheck
```

1.  다음 명령을 입력하고 Enter 키를 눌러 Active Directory를 **\~/clouddrive**에서 **\~/clouddrive/ipcheck**로 변경합니다.

```
    cd ~/clouddrive/ipcheck
```

1.  다음 명령을 입력하고 Enter 키를 눌러 현재 디렉터리에서 새 .NET Core 콘솔 애플리케이션을 만듭니다.

```
    dotnet new console --output . --name ipcheck
```

1.  다음 명령을 입력하고 Enter 키를 눌러 **Dockerfile**이라는 새 파일을 **\~/clouddrive/ipcheck** 디렉터리에 만듭니다.

```
    touch Dockerfile
```

1.  다음 명령을 입력하고 Enter 키를 눌러 현재 디렉터리 컨텍스트에서 포함된 그래픽 편집기를 엽니다.

```
    code .
```

#### 작업 2: .NET 코어 응용 프로그램 만들기 및 테스트

1.  그래픽 편집기 내에서 **파일** 페인을 찾아서 **Program.cs** 파일을 두번 클릭하여 편집기에서 해당 파일을 엽니다.

1.  **Program.cs**파일의 전체 내용을 삭제합니다.

1.  다음 코드를 복사하여**Program.cs** 파일에 붙여넣습니다.

```
    public class Program
    {
        public static void Main(string[] args)
        {        
            if (System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable())
            {
                System.Console.WriteLine("Current IP Addresses:");
                string hostname = System.Net.Dns.GetHostName();
                System.Net.IPHostEntry host = System.Net.Dns.GetHostEntry(hostname);
                foreach(System.Net.IPAddress address in host.AddressList)
                {
                    System.Console.WriteLine($"\t{address}");
                }
            }
            else
            {
                System.Console.WriteLine("No Network Connection");
            }
        }
    }
```

1.  그래픽 편집기의 메뉴 또는 **Ctrl+S** 키보드 바로 가기 키를 사용하여 **Program.cs** 파일을 **저장**합니다.  그래픽 편집기는 닫지 마십시오.

1.  명령 프롬프트에서 다음 명령을 입력하고 Enter 키를 눌러 애플리케이션을 실행합니다.

```
    dotnet run
```

1.  실행 결과를 관찰합니다. Cloud Shell 인스턴스에 나열된 IP 주소가 하나 이상 있어야 합니다.

1.  그래픽 편집기 내에서 편집기 왼쪽에 있는 **파일** 페인을 찾아서 **도커파일** 파일을 다시 선택하여 편집기에서 해당 파일을 엽니다.

8.  다음 코드를 복사하여 **도커파일**파일에 붙여넣습니다.

```
    FROM mcr.microsoft.com/dotnet/core/sdk:2.2-alpine AS build
    WORKDIR /app

    COPY *.csproj ./
    RUN dotnet restore

    COPY . ./
    RUN dotnet publish --configuration Release --output out

    FROM mcr.microsoft.com/dotnet/core/runtime:2.2-alpine
    WORKDIR /app

    COPY --from=build /app/out .

    ENTRYPOINT ["dotnet", "ipcheck.dll"]
```

1.  그래픽 편집기의 메뉴 또는 **Ctrl+S** 키보드 바로 가기를 사용하여 **Dockerfile** 파일을 **저장**합니다.

1. 포털 하단에 **Cloud Shell** 페인을 닫습니다.

#### 작업 3: Azure 컨테이너 레지스트리 리소스 만들기

1.  포털 왼쪽에 있는 네비게인션 메뉴에서 **+ 리소스 만들기** 링크를 선택합니다.

1.  **새** 블레이드 상단에서 피쳐 서비스 목록 위의 **마켓플레이스 검색** 텍스트 박스를 찾습니다.

1.  검색 텍스트 상자에 **컨테이너 레지스트리**를 입력하고 **Enter** 키를 누릅니다.

1.  **모든 항목** 검색 결과 블레이드에서 **컨테이너 레지스트리** 결과를 선택합니다.

1.  **컨테이너 레지스트리** 블레이드에서 **만들기**를 선택합니다.

1.  **컨테이너 레지스트리 만들기** 블레이드에서 다음 작업을 수행합니다.

    1.  **레지스트리 이름** 텍스트 상자에서 레지스트리에 전역적으로 고유한 이름을 지정합니다.

        >  참고: 블레이드는 자동으로 이름이 고유한지 확인하고 다른 이름을 선택해야 하는 경우 알려줍니다.

    1.  **구독**텍스트 박스를 기본값으로 설정된 상태로 둡니다.

    1.  **리소스 그룹**드롭다운 목록에서 기존 **ContainerCompute**옵션을 선택합니다.

    1.  **위치**텍스트 박스에서 **미국 동부**를 선택합니다.

    1.  **관리 사용자**섹션에서 사용 **안 함**옵션을 선택합니다.

    1.  **SKU** 드롭다운 목록에서 **기본**을 선택합니다.

    1.  **만들기**를 선택합니다.

1.  이 랩을 진행하기 전에 만들기 작업이 완료될 때까지 기다립니다.

#### 작업 4: Cloud Shell 을 열고 Azure 컨테이너 레지스트리 메타데이터를 저장합니다

1.  포털 상단에 **Cloud Shell** 아이콘을 선택하여 새 셸 인스턴스를 엽니다.

1.  랩에 진행하기 전에**Cloud Shell**이 인스턴스에 연결완료될 때까지 기다립니다.

1.  포털 하단의**Cloud Shell**명령 프롬프트에서 다음 명령을 입력하고 Enter 를 눌러 구독의 모든 컨테이너 레지스트리 목록을 봅니다.

```
    az acr list
```

1.  다음 명령을 입력하고 Enter 키를 누릅니다.

```
    az acr list --query "max_by([], &creationDate).name" --output tsv
```

1.  다음 명령을 입력하고 Enter 키를 누릅니다.

```
    acrName=$(az acr list --query "max_by([], &creationDate).name" --output tsv)
```

1.  다음 명령을 입력하고 Enter 키를 누릅니다.

```
    echo $acrName
```

#### 작업 5: Azure 컨테이너 레지스트리에 도커 컨테이너 이미지 배치합니다.

1.  다음 명령을 입력하고 Enter 를 눌러 액티브 디렉터리를 **\~/** **\~/clouddrive/ipcheck**로 변경합니다.

```
    cd ~/clouddrive/ipcheck
```

1.  다음 명령을 입력하고 Enter 키를 눌러 현재 디렉터리 내용을 봅니다.

```
    dir
```

1.  다음 명령을 입력하고 Enter 키를 눌러 **컨테이너 레지스트리**에 소스 코드를 업로드하고 컨테이너 이미지를 **Azure Container Registry 작업**으로 빌드합니다.

```
    az acr build --registry $acrName --image ipcheck:latest.
```

1.  이 랩을 진행하기 전에 빌드 작업이 완료될 때까지 기다립니다.

1.  포털 하단의 **Cloud Shell** 창을 닫습니다.

#### 작업 6: Azure 컨테이너 레지스트리에서 컨테이너 이미지 검증합니다.

1.  포털의 왼쪽에 있는 네비게이션 메뉴에서 **리소스 그룹** 링크를 선택합니다.

1.  **리소스 그룹** 블레이드에서 이 랩의 앞에서 만든 **ContainerCompute** 리소스 그룹을 찾아서 선택합니다.

1.  **컨테이너컴퓨팅**블레이드에서 이전에 랩에서 만든 컨테이너 레지스트리를 선택합니다.

1.  **컨테이너 레지스트리** 블레이드에서 **서비스** 섹션을 찾아서 **리포지토리**링크를 선택합니다.

1.  **리포지토리** 섹션에서 **ipcheck** 컨테이너 이미지 리포지토리를 선택합니다.

1.  **리포지토리** 블레이드에서 **최신** 태그를 선택합니다.

1.  **최신**태그가 있는 컨테이너 이미지 버전의 메타데이터를 관찰합니다.

    > **참고**: **실행 ID** 하이퍼링크를 선택하여 빌드 작업에 대한 메타데이터를 볼 수도 있습니다.

#### 복습

이 연습에서는 컴퓨터의 현재 IP 주소를 표시하는 .NET 코어 콘솔 응용 프로그램을 만들었습니다. 그 다음 도커 컨테이너 이미지로 변환하기 위하여 애플리케이션에 Dockerfile 파일을 추가했습니다. 마지막으로 Azure 컨테이너 레지스트리에 컨테이너 이미지를 배치했습니다.

### 연습 4: Azure Container Instances를 배치합니다. 

#### 작업 1: Azure 컨테이너 레지스트리에서 관리자 사용자 사용

1.  포털의 왼쪽에 있는 네비게이션 메뉴에서 **리소스 그룹** 링크를 선택합니다.

1.  **리소스 그룹** 블레이드에서 이 랩의 앞에서 만든 **ContainerCompute** 리소스 그룹을 찾아서 선택합니다.

1.  **컨테이너컴퓨팅**블레이드에서 이전에 랩에서 만든 컨테이너 레지스트리를 선택합니다.

1.  **컨테이너 레지스트리** 블레이드에 상단에서 **업데이트**를 선택합니다.

1.  **컨테이너 레지스트리 업데이트** 블레이드에서 다음 작업을 수행합니다.
    
    1.  **관리 사용자**섹션에서**할 수 있음**을 선택합니다.
    
    1.  **저장**을 선택합니다.
    
1.  **컨테이너 레지스트리 업데이트**를 블레이드에서 닫습니다.

#### 작업 2: Azure Container Instances에 컨테이너 이미지를 자동으로 배치합니다.

1.  **컨테이너 레지스트리**블레이드에서 **서비스**섹션을 찾아서**리포지토리**링크를 선택합니다.

1.  **리포지토리** 섹션에서 **ipcheck** 컨테이너 이미지 리포지토리를 선택합니다.

1.  **리포지토리** 블레이드에서 최신 **태그** 항목의 오른쪽에 있는 타원 메뉴를 선택합니다.

1.  표시되는 팝업 메뉴에서 **인스턴스 실행** 링크를 선택합니다.

1.  표시되는 **컨테이너 인스턴스 만들기** 블레이드에서 다음 작업을 수행합니다.
    
    1.  **컨테이너 이름** 텍스트 박스에 **managedcompute**을 입력합니다.
    
    1.  **컨테이너 이미지** 텍스트 박스를 기본값으로 설정합니다.
    
    1.  **OS 유형**섹션에서 **Linux**을 선택합니다.
    
    1.  **구독** 텍스트 박스를 기본값으로 설정된 상태로 둡니다.
    
    1.  **리소스 그룹** 드롭다운 목록에서 **컨테이너컴퓨팅**을 선택합니다.
    
    1.  **위치** 드롭다운 목록에서 **미국 동부**를 선택합니다.
    
    1.  **코어 수** 드롭다운 목록에서 **2**를 선택합니다.
    
    1.  **메모리(GB)** 텍스트 박스에 **4**를 입력합니다.
    
    1.  **공용 IP 주소**섹션에서 **아니요**를 선택합니다.
    
    1. **확인**을 선택합니다.

1.  이 랩을 진행하기 전에 만들기 태스크 완료될 때까지 기다립니다.

#### 작업 3: Azure Container Instances에 컨테이너 이미지를 수동으로 배치합니다

1.  포털의 왼쪽에 있는 네비게인션 메뉴에서 **리소스그룹** 링크를 선택합니다.

1.  **리소스 그룹** 블레이드에서 이전에 랩에서 만든 **컨테이너컴퓨팅** 리소스 그룹을 찾아서 선택합니다.

1.  **컨테이너컴퓨팅** 블레이드에서 이전에 랩에서 만든 컨테이너 레지스트리를 선택합니다.

1.  **컨테이너 레지스트리**블레이드에서 **설정** 섹션을 찾아서 **액세스 키**링크를 선택합니다.

1.  **액세스 키** 섹션에서 다음 필드의 값을 기록합니다.
    
    1.  **로그인 서버**
    
    1.  **사용자 이름**
    
    1.  **암호**

        > **참고**: 이 랩의 뒷부분에서 다른 **컨테이너 인스턴스**를 만들 때 이러한 값을 사용합니다.

1.  포털 왼쪽에 있는 탐색 메뉴에서**+ 리소스 만들기** 링크를 선택합니다.

1.  **새** 블레이드 상단에서 피쳐 서비스 목록 위의 **마켓플레이스 검색** 텍스트 박스를 찾습니다.

1.  검색 텍스트 상자에 **컨테이너 인스턴스**를 입력하고 **Enter** 키를 누릅니다.

1.  **모든 항목** 검색 결과 블레이드에서 **컨테이너 인스턴스** 결과를 선택합니다.

1. **컨테이너 인스턴스** 블레이드에서 **만들기**를 선택합니다.

1. **컨테이너 인스턴스 만들기** 블레이드에서 블레이드 왼쪽의 **기본** 및 **고급**과 같은 탭을 살펴봅니다.

    > **참고**: 각 탭은 새 **컨테이너 인스턴스**를 만드는 워크플로의 단계를 나타냅니다.

1. **기본** 탭에서 다음 작업을 수행합니다:

    1. **구독** 텍스트 상자를 기본값으로 설정합니다.

    1. **리소스 그룹** 드롭다운 목록에서 **컨테이너컴퓨팅**을 선택합니다.
    
    1.  **컨테이너 이름** 텍스트 상자에 **manualcompute**를 입력합니다.

    1. **지역** 드롭다운 목록에서 **(미국) 미국 동부**를 선택합니다.
    
    1.  **이미지 유형** 섹션에서 **비공개**를 선택합니다.
    
    1.  **이미지 이름** 텍스트 상자에 앞에서 기록한 **로그인 서버** 값을 입력한 다음 접미사 /**ipcheck:latest**를 추가합니다.

        > **참고**: 예를 들어 **로그인 서버** 값이 **azadmin.azurecr.io**인 경우 컨테이너 이미지 이름이 **azadmin.azurecr.io/ipcheck:latest**가 됩니다.

    1.  **이미지 레지스트리 로그인 서버** 텍스트 박스에 이전에 랩에서 기록한 **로그인 서버**값을입력합니다.

    1.  **이미지 레지스트리 사용자 이름** 텍스트 상자에 이 랩의 앞에서 기록한 **사용자 이름** 값을 입력합니다.

    1.  **이미지 레지스트리 암호** 텍스트 상자에 이 랩의 앞에서 기록한 **암호** 값을 입력합니다.

    1. **OS 유형** 섹션에서 **Linux**를 선택합니다.

    1. **크기** 텍스트 상자에서 **크기 변경** 링크를 선택합니다.

    1. **컨테이너 크기 변경** 블레이드에서 다음 작업을 수행합니다.

        1. **CPU 코어 수** 텍스트 상자에 **1**을 입력합니다.

        1. **메모리(GiB)** 텍스트 상자에 **1.5**를 입력합니다.

        1. **GPU 유형** 드롭다운 목록의 기본값을 그대로 둡니다.

        1. **확인**을 선택합니다.
    
    1. **다음: 네트워킹을 선택합니다.**

1. **네트워킹** 탭에서 다음 작업을 수행합니다.
    
    1. **공용 IP 주소 포함** 섹션에서 **예**를 선택합니다.

    1. **포트** 섹션에서 포트 프로토콜 **TCP**와 함께 포트 **80**이 있는지 확인합니다.
    
    1. **DNS 이름 레이블** 텍스트 상자를 비워 둡니다.

    1. **다음: 고급**을 선택합니다.

1. **고급** 탭에서 다음 작업을 수행합니다.
    
    1. **재시작 정책** 드롭다운 목록에서 **실패 시**를 선택합니다.
    
    1. **환경 변수**텍스트 박스를 비워 둡니다.
    
    1. **명령 재정의** 텍스트 상자를 비워 둡니다.

    1. **검토 + 만들기**를 선택합니다.

1. **검토 + 만들기** 탭에서 선택한 옵션을 검토합니다.

1. 지정된 구성을 사용하여 컨테이너 인스턴스를 만들려면 **만들기**를 선택합니다.

1. 이 랩을 진행하기 전에 만들기 작업이 완료될 때까지 기다립니다.

#### 작업 4: 컨테이너 인스턴스가 성공적으로 실행되었는지 확인

1.  포털의 왼쪽에 있는 탐색 메뉴에서 **리소스 그룹** 링크를 선택합니다.

1.  **리소스 그룹** 블레이드에서 이전에 랩에서 만든 **컨테인너컴퓨팅**리소스 그룹을 찾아서 선택합니다.

1.  **컨테인너컴퓨팅** 블레이드에서 이전에 랩에서 만든 **수동 계산** 컨테이너 인스턴스를 선택합니다.

1.  **컨테이너 인스턴스** 블레이드에서 **설정** 섹션을 찾아서 **컨테이너**링크를 선택합니다.

1.  **컨테이너** 섹션에서**이벤트** 목록을 관찰합니다.

1.  **로그** 탭을 선택하고 컨테이너 인스턴스에서 텍스트 로그를 확인합니다.
> **참고**: 필요에 따라 **managedcompute** 컨테이너 인스턴스에서 **이벤트** 및 **로그**를 볼 수도 있습니다.

> **참고**: 애플리케이션 실행이 완료된 후 컨테이너가 작업을 완료했기 때문에 종료되었습니다.  수동으로 만든 컨테이너 인스턴스의 경우 성공적인 종료가 허용 가능하다고 나타내었으므로 컨테이너에 단일 실행이 표시됩니다.  자동으로 만든 인스턴스는 이 옵션을 제공하지 않으며 컨테이너가 항상 실행되어야 한다고 가정하므로 컨테이너가 반복적으로 다시 시작되는 것을 볼 수 있습니다.

#### 복습

이 연습에서는 다양한 메서드를 사용하여 컨테이너 이미지를 Azure Container Instances에 배포했습니다. 수동 메서드를 통해서 배치를 추가로 지정도 가능하고 컨테이너 실행의 일부로 작업형 응용 프로그램을 실행도 가능합니다.

### 연습5: 구독 정리 

#### 작업 1: Cloud Shell 열기 및 리소스 그룹 나열하기

1.  포털 상단에 **Cloud Shell** 아이콘을 선택하여 새 셸 인스턴스를 엽니다.

1.  포털 하단의 **Cloud Shell**명령 프롬프트에서 다음 명령을 입력하고 Enter 를 눌러 구독의 모든 리소스 그룹을 나열합니다.

```
    az group list
```

1.  다음 명령을 입력하고 Enter 키를 눌러 리소스 그룹을 삭제하는 데 사용할 수 있는 명령 목록을 봅니다.

```
    az group delete --help
```

#### 작업 2: 리소스 그룹 삭제

1.  다음 명령을 입력하고 Enter 키를 눌러 **ContainerCompute** 리소스 그룹을 삭제합니다.

```
    az group delete --name ContainerCompute --no-wait --yes
```

1.  포털 하단의 **Cloud Shell** 창을 닫습니다.

#### 작업 3: 활성 애플리케이션 닫기

1.  현재 실행 중인 **Microsoft Edge** 응용 프로그램을 닫습니다.

#### 검토

이 연습에서는 이 랩에 사용된 **리소스 그룹**을 제거하여 구독을 정리했습니다.
